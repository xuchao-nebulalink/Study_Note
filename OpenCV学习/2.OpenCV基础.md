# OpenCVåŸºç¡€
## å›¾åƒIOæ“ä½œ

è¿™æ˜¯å­¦OpenCVçš„ç¬¬ä¸€æ­¥ï¼Œå¾—å…ˆä¼šè¯»ã€æ˜¾ç¤ºã€ä¿å­˜å›¾ç‰‡æ‰èƒ½ç»§ç»­æ“ä½œã€‚

### 1. è¯»å–å›¾åƒ - ==cv2.imread()==

**åŸºæœ¬ç”¨æ³•ï¼š**
```python
import cv2

# è¯»å–å›¾ç‰‡ï¼ˆé»˜è®¤æ˜¯å½©è‰²æ¨¡å¼ï¼‰
img = cv2.imread('å›¾ç‰‡è·¯å¾„.jpg')

# è¯»å–ç°åº¦å›¾
img_gray = cv2.imread('å›¾ç‰‡è·¯å¾„.jpg', cv2.IMREAD_GRAYSCALE)
# æˆ–è€…ç®€å†™æˆæ•°å­—ï¼š0è¡¨ç¤ºç°åº¦ï¼Œ1è¡¨ç¤ºå½©è‰²
img_gray = cv2.imread('å›¾ç‰‡è·¯å¾„.jpg', 0)
```

**å‡½æ•°å‚æ•°è¯´æ˜ï¼š**
```python
cv2.imread(filename, flags=cv2.IMREAD_COLOR)
```
- ==`filename`==ï¼šå›¾ç‰‡è·¯å¾„ï¼ˆå­—ç¬¦ä¸²ï¼‰
- ==`flags`==ï¼šè¯»å–æ¨¡å¼ï¼ˆå¯é€‰ï¼‰
  - `cv2.IMREAD_COLOR` æˆ– `1`ï¼šå½©è‰²æ¨¡å¼ï¼ˆ==é»˜è®¤==ï¼‰ï¼Œè¯»æˆ==BGRæ ¼å¼==
  - `cv2.IMREAD_GRAYSCALE` æˆ– `0`ï¼šç°åº¦æ¨¡å¼
  - `cv2.IMREAD_UNCHANGED` æˆ– `-1`ï¼šåŒ…å«alphaé€šé“
- **è¿”å›å€¼**ï¼šå›¾åƒçš„NumPyæ•°ç»„ï¼Œå¤±è´¥è¿”å› `None`

**æ³¨æ„äº‹é¡¹ï¼š**
- ==OpenCVè¯»å–çš„å½©è‰²å›¾æ˜¯ **BGRæ ¼å¼**ï¼ˆè“ç»¿çº¢ï¼‰ï¼Œä¸æ˜¯å¸¸è§çš„RGBæ ¼å¼ï¼==
- å¦‚æœå›¾ç‰‡è·¯å¾„ä¸å­˜åœ¨ï¼Œ==ä¸ä¼šæŠ¥é”™==ï¼Œä½†è¿”å› `None`
- ä¸­æ–‡è·¯å¾„å¯èƒ½å‡ºé—®é¢˜ï¼Œå»ºè®®ç”¨è‹±æ–‡è·¯å¾„

**æ£€æŸ¥æ˜¯å¦è¯»å–æˆåŠŸï¼š**
```python
img = cv2.imread('tt.png')
if img is None:
    print('å›¾ç‰‡è¯»å–å¤±è´¥ï¼Œæ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡®')
else:
    print('å›¾ç‰‡è¯»å–æˆåŠŸ')
    print(f'å›¾ç‰‡å¤§å°ï¼š{img.shape}')  # (é«˜åº¦, å®½åº¦, é€šé“æ•°)
```

![[Pasted image 20251020110434.png]]

### 2. æ˜¾ç¤ºå›¾åƒ - ==cv2.imshow()==

**ç”¨OpenCVæ˜¾ç¤ºï¼š**
```python
import cv2

img = cv2.imread('test.jpg')

# æ˜¾ç¤ºå›¾ç‰‡
cv2.imshow('çª—å£åå­—', img)  # ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯çª—å£æ ‡é¢˜

# ==ç­‰å¾…æŒ‰é”®ï¼ˆå¿…é¡»åŠ ï¼ä¸åŠ çš„è¯çª—å£ä¸€é—ªå°±æ²¡äº†ï¼‰==
cv2.waitKey(0)  # ==0è¡¨ç¤ºæ— é™ç­‰å¾…==ï¼Œç›´åˆ°æŒ‰ä»»æ„é”®
# cv2.waitKey(5000)  # ä¹Ÿå¯ä»¥æŒ‡å®šç­‰å¾…æ—¶é—´ï¼Œæ¯”å¦‚5000æ¯«ç§’=5ç§’

# å…³é—­æ‰€æœ‰çª—å£
cv2.destroyAllWindows()
```

**å‡½æ•°å‚æ•°è¯´æ˜ï¼š**
```python
cv2.imshow(winname, mat)
cv2.waitKey(delay=0)
cv2.destroyAllWindows()
```
- ==`cv2.imshow()`== å‚æ•°ï¼š
  - `winname`ï¼šçª—å£åå­—ï¼ˆå­—ç¬¦ä¸²ï¼‰
  - `mat`ï¼šè¦æ˜¾ç¤ºçš„å›¾åƒï¼ˆNumPyæ•°ç»„ï¼‰
  
- ==`cv2.waitKey()`== å‚æ•°ï¼š
  - `delay`ï¼šç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  - `0`ï¼š==æ— é™ç­‰å¾…==ï¼Œç›´åˆ°æŒ‰é”®
  - `>0`ï¼šç­‰å¾…æŒ‡å®šæ¯«ç§’ï¼Œè¶…æ—¶è‡ªåŠ¨å…³é—­
  - **è¿”å›å€¼**ï¼šæŒ‰é”®çš„ASCIIç ï¼Œè¶…æ—¶è¿”å› `-1`
  
- ==`cv2.destroyAllWindows()`==ï¼šå…³é—­æ‰€æœ‰OpenCVçª—å£

**ç”¨Matplotlibæ˜¾ç¤ºï¼ˆæ¨èåœ¨notebooké‡Œç”¨ï¼‰ï¼š**
```python
import cv2
import matplotlib.pyplot as plt

img = cv2.imread('test.jpg')

# ==OpenCVè¯»çš„æ˜¯BGRï¼Œè¦è½¬æˆRGBæ‰èƒ½æ­£ç¡®æ˜¾ç¤º==
img_rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)

plt.imshow(img_rgb)
plt.title('æˆ‘çš„å›¾ç‰‡')
plt.axis('off')  # ä¸æ˜¾ç¤ºåæ ‡è½´
plt.show()
```

==**cv2.cvtColor() å‚æ•°è¯´æ˜ï¼š**==
```python
cv2.cvtColor(src, code)
```
- ==`src`==ï¼šæºå›¾åƒ
- ==`code`==ï¼šé¢œè‰²è½¬æ¢ä»£ç ï¼Œå¸¸ç”¨çš„æœ‰ï¼š
  - `cv2.COLOR_BGR2RGB`ï¼šBGRè½¬RGBï¼ˆmatplotlibç”¨ï¼‰
  - `cv2.COLOR_BGR2GRAY`ï¼šBGRè½¬ç°åº¦
  - `cv2.COLOR_GRAY2BGR`ï¼šç°åº¦è½¬BGR
  - `cv2.COLOR_BGR2HSV`ï¼šBGRè½¬HSVè‰²å½©ç©ºé—´
  - `cv2.COLOR_HSV2BGR`ï¼šHSVè½¬BGR
- **è¿”å›å€¼**ï¼šè½¬æ¢åçš„å›¾åƒ

![[Pasted image 20251020134752.png]]
**æ˜¾ç¤ºå¤šå¼ å›¾ç‰‡å¯¹æ¯”ï¼š**
```python
import cv2
import matplotlib.pyplot as plt

# å…ˆè¯»å–ä¸€å¼ å›¾ç‰‡
img = cv2.imread('tt.png')  # ç”¨ä½ çš„å›¾ç‰‡è·¯å¾„

# è½¬æ¢æˆRGBï¼ˆmatplotlibè¦ç”¨ï¼‰
img_rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)

# è½¬æ¢æˆç°åº¦å›¾
img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

# åšä¸€äº›ç®€å•å¤„ç†ï¼Œæ¯”å¦‚æ¨¡ç³Š
img_blur = cv2.GaussianBlur(img, (15, 15), 0)
img_blur_rgb = cv2.cvtColor(img_blur, cv2.COLOR_BGR2RGB)

# ç°åœ¨æ˜¾ç¤ºä¸‰å¼ å›¾å¯¹æ¯”
fig, axes = plt.subplots(1, 3, figsize=(15, 5))
axes[0].imshow(img_rgb); axes[0].set_title('åŸå›¾')
axes[1].imshow(img_gray, cmap='gray'); axes[1].set_title('ç°åº¦å›¾')
axes[2].imshow(img_blur_rgb); axes[2].set_title('æ¨¡ç³Šå¤„ç†')

# å…³é—­åæ ‡è½´
for ax in axes:
    ax.axis('off')

plt.tight_layout()
plt.show()
```
![[Pasted image 20251020135027.png]]

### 3. ä¿å­˜å›¾åƒ - ==cv2.imwrite()==

**åŸºæœ¬ç”¨æ³•ï¼š**
```python
import cv2

img = cv2.imread('input.jpg')

# å¯¹å›¾ç‰‡åšä¸€äº›å¤„ç†...
# processed_img = ...

# ä¿å­˜å›¾ç‰‡
cv2.imwrite('output.jpg', img)

# ä¿å­˜ä¸ºPNGæ ¼å¼ï¼ˆæ— æŸï¼‰
cv2.imwrite('output.png', img)
```

**å‡½æ•°å‚æ•°è¯´æ˜ï¼š**
```python
cv2.imwrite(filename, img, params=None)
```
- ==`filename`==ï¼šä¿å­˜è·¯å¾„ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œæ ¼å¼ç”±æ‰©å±•åå†³å®š
- ==`img`==ï¼šè¦ä¿å­˜çš„å›¾åƒï¼ˆNumPyæ•°ç»„ï¼‰
- ==`params`==ï¼šæ ¼å¼ç›¸å…³å‚æ•°ï¼ˆå¯é€‰ï¼‰ï¼Œä»¥åˆ—è¡¨å½¢å¼ä¼ å…¥
  - `cv2.IMWRITE_JPEG_QUALITY`ï¼šJPGè´¨é‡ï¼ˆ0-100ï¼Œé»˜è®¤95ï¼‰
  - `cv2.IMWRITE_PNG_COMPRESSION`ï¼šPNGå‹ç¼©ï¼ˆ0-9ï¼Œé»˜è®¤3ï¼‰
- **è¿”å›å€¼**ï¼šä¿å­˜æˆåŠŸè¿”å› `True`ï¼Œå¤±è´¥è¿”å› `False`

**è®¾ç½®ä¿å­˜è´¨é‡ï¼ˆé’ˆå¯¹JPGï¼‰ï¼š**
```python
# è®¾ç½®JPGå‹ç¼©è´¨é‡ï¼ˆ==0-100ï¼Œé»˜è®¤95==ï¼‰
cv2.imwrite('output.jpg', img, [cv2.IMWRITE_JPEG_QUALITY, 90])

# ä½è´¨é‡ï¼ˆæ–‡ä»¶å°ï¼‰
cv2.imwrite('low_quality.jpg', img, [cv2.IMWRITE_JPEG_QUALITY, 50])

# é«˜è´¨é‡ï¼ˆæ–‡ä»¶å¤§ï¼‰
cv2.imwrite('high_quality.jpg', img, [cv2.IMWRITE_JPEG_QUALITY, 100])
```

**è®¾ç½®PNGå‹ç¼©çº§åˆ«ï¼š**
```python
# PNGå‹ç¼©çº§åˆ«ï¼ˆ0-9ï¼Œ0ä¸å‹ç¼©ï¼Œ9æœ€å¤§å‹ç¼©ï¼‰
cv2.imwrite('output.png', img, [cv2.IMWRITE_PNG_COMPRESSION, 9])
```

**æ³¨æ„äº‹é¡¹ï¼š**
- ä¿å­˜çš„æ ¼å¼ç”±æ–‡ä»¶æ‰©å±•åå†³å®šï¼ˆ.jpgã€.pngã€.bmpç­‰ï¼‰
- å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œéœ€è¦å…ˆåˆ›å»ºæ–‡ä»¶å¤¹
- ä¸­æ–‡è·¯å¾„å¯èƒ½å‡ºé—®é¢˜

### 4. å®Œæ•´ç¤ºä¾‹ - è¯»å–ã€å¤„ç†ã€ä¿å­˜

```python
import cv2
import numpy as np

# è¯»å–å›¾ç‰‡
img = cv2.imread('lena.jpg')

if img is None:
    print('å›¾ç‰‡è¯»å–å¤±è´¥ï¼')
else:
    # æ˜¾ç¤ºåŸå›¾ä¿¡æ¯
    print(f'å›¾ç‰‡å¤§å°ï¼š{img.shape}')
    
    # è½¬æ¢ä¸ºç°åº¦å›¾
    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
    
    # æ˜¾ç¤ºåŸå›¾å’Œç°åº¦å›¾
    cv2.imshow('Original', img)
    cv2.imshow('Gray', gray)
    
    # ä¿å­˜ç°åº¦å›¾
    cv2.imwrite('lena_gray.jpg', gray)
    print('ç°åº¦å›¾å·²ä¿å­˜')
    
    # ç­‰å¾…æŒ‰é”®
    cv2.waitKey(0)
    cv2.destroyAllWindows()
```
![[Pasted image 20251020140329.png]]
![[Pasted image 20251020140417.png]]
### å°æŠ€å·§

**1. å¤„ç†ä¸­æ–‡è·¯å¾„ï¼š**
```python
import cv2
import numpy as np

# ç”¨numpyè¯»å–ä¸­æ–‡è·¯å¾„
img = cv2.imdecode(np.fromfile('ä¸­æ–‡è·¯å¾„/å›¾ç‰‡.jpg', dtype=np.uint8), cv2.IMREAD_COLOR)

# ä¿å­˜åˆ°ä¸­æ–‡è·¯å¾„
cv2.imencode('.jpg', img)[1].tofile('ä¸­æ–‡è·¯å¾„/è¾“å‡º.jpg')
```

**2. æ‰¹é‡è¯»å–å›¾ç‰‡ï¼š**
```python
import cv2
import os

folder = 'images/'
for filename in os.listdir(folder):
    if filename.endswith('.jpg') or filename.endswith('.png'):
        img_path = os.path.join(folder, filename)
        img = cv2.imread(img_path)
        # å¤„ç†å›¾ç‰‡...
```

---

**å°ç»“ï¼š**
- ==`cv2.imread()`== - è¯»å›¾ç‰‡
- ==`cv2.imshow()`== - æ˜¾ç¤ºå›¾ç‰‡ï¼ˆ==è®°å¾—åŠ waitKey==ï¼‰
- ==`cv2.imwrite()`== - ä¿å­˜å›¾ç‰‡
- ==æ³¨æ„BGRå’ŒRGBçš„åŒºåˆ«==
- ä¸­æ–‡è·¯å¾„è¦ç‰¹æ®Šå¤„ç†

---

## åœ¨å›¾åƒä¸­ç»˜åˆ¶å‡ ä½•å›¾å½¢

OpenCVæä¾›äº†ä¸°å¯Œçš„ç»˜å›¾åŠŸèƒ½ï¼Œå¯ä»¥åœ¨å›¾åƒä¸Šç»˜åˆ¶å„ç§å‡ ä½•å›¾å½¢å’Œæ–‡å­—ï¼Œå¸¸ç”¨äºæ ‡æ³¨ã€å¯è§†åŒ–ç­‰åœºæ™¯ã€‚

### 1. ç»˜åˆ¶ç›´çº¿ - ==cv2.line()==

```python
import cv2
import numpy as np

# åˆ›å»ºä¸€ä¸ªé»‘è‰²èƒŒæ™¯
img = np.zeros((512, 512, 3), dtype=np.uint8)

# ç»˜åˆ¶ä¸€æ¡çº¢è‰²ç›´çº¿
cv2.line(img, (50, 50), (400, 50), (0, 0, 255), 3)

# ç»˜åˆ¶ä¸€æ¡ç»¿è‰²æ–œçº¿
cv2.line(img, (50, 100), (400, 400), (0, 255, 0), 5)

# ç»˜åˆ¶è™šçº¿æ•ˆæœï¼ˆç”¨å¤šæ¡çŸ­çº¿ï¼‰
for i in range(0, 500, 20):
    cv2.line(img, (i, 200), (i+10, 200), (255, 0, 0), 3)

cv2.imshow('Lines', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

**å‡½æ•°å‚æ•°ï¼š**
```python
cv2.line(img, pt1, pt2, color, thickness, lineType)
```
- ==`img`==ï¼šè¦ç»˜åˆ¶çš„å›¾åƒ
- ==`pt1`==ï¼šèµ·ç‚¹åæ ‡ `(x1, y1)`
- ==`pt2`==ï¼šç»ˆç‚¹åæ ‡ `(x2, y2)`
- ==`color`==ï¼šçº¿æ¡é¢œè‰²ï¼ˆBGRï¼‰`(B, G, R)`
- `thickness`ï¼šçº¿å®½ï¼ˆåƒç´ ï¼‰ï¼Œé»˜è®¤1
- `lineType`ï¼šçº¿å‹ï¼Œå¯é€‰ï¼š
  - `cv2.LINE_8`ï¼š8è¿æ¥çº¿ï¼ˆé»˜è®¤ï¼‰
  - `cv2.LINE_4`ï¼š4è¿æ¥çº¿
  - `cv2.LINE_AA`ï¼šæŠ—é”¯é½¿çº¿ï¼ˆå¹³æ»‘ï¼‰
![[Pasted image 20251020143149.png]]

### 2. ç»˜åˆ¶çŸ©å½¢ - ==cv2.rectangle()==

```python
import cv2
import numpy as np

img = np.zeros((512, 512, 3), dtype=np.uint8)

# ç»˜åˆ¶ç©ºå¿ƒçŸ©å½¢ï¼ˆç»¿è‰²ï¼Œçº¿å®½2ï¼‰
cv2.rectangle(img, (50, 50), (200, 150), (0, 255, 0), 2)

# ç»˜åˆ¶å®å¿ƒçŸ©å½¢ï¼ˆè“è‰²ï¼Œå¡«å……ï¼‰
cv2.rectangle(img, (250, 50), (400, 150), (255, 0, 0), -1)

# ç»˜åˆ¶åœ†è§’çŸ©å½¢ï¼ˆéœ€è¦è‡ªå·±ç»„åˆï¼‰
cv2.rectangle(img, (50, 200), (200, 350), (0, 255, 255), 3)

cv2.imshow('Rectangles', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

**å‡½æ•°å‚æ•°ï¼š**
```python
cv2.rectangle(img, pt1, pt2, color, thickness, lineType)
```
- ==`pt1`==ï¼šå·¦ä¸Šè§’åæ ‡ `(x1, y1)`
- ==`pt2`==ï¼šå³ä¸‹è§’åæ ‡ `(x2, y2)`
- ==`thickness`==ï¼šçº¿å®½ï¼Œ==-1è¡¨ç¤ºå¡«å……==
![[Pasted image 20251020143426.png]]

### 3. ç»˜åˆ¶åœ†å½¢ - ==cv2.circle()==

```python
import cv2
import numpy as np

img = np.zeros((512, 512, 3), dtype=np.uint8)

# ç»˜åˆ¶ç©ºå¿ƒåœ†ï¼ˆçº¢è‰²ï¼Œçº¿å®½3ï¼‰
cv2.circle(img, (150, 150), 80, (0, 0, 255), 3)

# ç»˜åˆ¶å®å¿ƒåœ†ï¼ˆç»¿è‰²ï¼Œå¡«å……ï¼‰
cv2.circle(img, (350, 150), 60, (0, 255, 0), -1)

# ç»˜åˆ¶åŒå¿ƒåœ†
cv2.circle(img, (250, 350), 100, (255, 255, 0), 2)
cv2.circle(img, (250, 350), 70, (255, 255, 0), 2)
cv2.circle(img, (250, 350), 40, (255, 255, 0), 2)

cv2.imshow('Circles', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

**å‡½æ•°å‚æ•°ï¼š**
```python
cv2.circle(img, center, radius, color, thickness, lineType)
```
- ==`center`==ï¼šåœ†å¿ƒåæ ‡ `(x, y)`
- ==`radius`==ï¼šåŠå¾„ï¼ˆåƒç´ ï¼‰
- ==`thickness`==ï¼šçº¿å®½ï¼Œ==-1å¡«å……==

![[Pasted image 20251020143553.png]]

### 4. ç»˜åˆ¶æ¤­åœ† - ==cv2.ellipse()==

```python
import cv2
import numpy as np

img = np.zeros((512, 512, 3), dtype=np.uint8)

# ç»˜åˆ¶æ¤­åœ†
cv2.ellipse(img, (256, 256), (100, 50), 0, 0, 360, (255, 0, 0), 2)

# ç»˜åˆ¶åŠæ¤­åœ†ï¼ˆä»0åº¦åˆ°180åº¦ï¼‰
cv2.ellipse(img, (256, 100), (80, 40), 0, 0, 180, (0, 255, 0), 3)

# ç»˜åˆ¶æ—‹è½¬çš„æ¤­åœ†ï¼ˆæ—‹è½¬45åº¦ï¼‰
cv2.ellipse(img, (150, 350), (100, 50), 45, 0, 360, (0, 255, 255), 2)

# ç»˜åˆ¶å®å¿ƒæ¤­åœ†
cv2.ellipse(img, (350, 350), (80, 40), 0, 0, 360, (255, 0, 255), -1)

cv2.imshow('Ellipses', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

**å‡½æ•°å‚æ•°ï¼š**
```python
cv2.ellipse(img, center, axes, angle, startAngle, endAngle, color, thickness)
```
- ==`center`==ï¼šæ¤­åœ†ä¸­å¿ƒ `(x, y)`
- ==`axes`==ï¼šé•¿çŸ­è½´ `(é•¿è½´, çŸ­è½´)`
- ==`angle`==ï¼šæ¤­åœ†æ—‹è½¬è§’åº¦ï¼ˆé¡ºæ—¶é’ˆï¼‰
- ==`startAngle`==ï¼šèµ·å§‹è§’åº¦ï¼ˆ0-360ï¼‰
- ==`endAngle`==ï¼šç»“æŸè§’åº¦ï¼ˆ0-360ï¼‰
- `color`ï¼šé¢œè‰²ï¼ˆBGRï¼‰
- `thickness`ï¼šçº¿å®½ï¼Œ-1å¡«å……

![[Pasted image 20251020143716.png]]

### 5. ç»˜åˆ¶å¤šè¾¹å½¢ - ==cv2.polylines()==

```python
import cv2
import numpy as np

img = np.zeros((512, 512, 3), dtype=np.uint8)

# å®šä¹‰ä¸‰è§’å½¢çš„ä¸‰ä¸ªé¡¶ç‚¹
pts_triangle = np.array([[100, 100], [200, 50], [200, 150]], np.int32)
pts_triangle = pts_triangle.reshape((-1, 1, 2))
cv2.polylines(img, [pts_triangle], True, (0, 255, 0), 3)

# å®šä¹‰äº”è¾¹å½¢
pts_pentagon = np.array([[300, 100], [380, 140], [350, 220], [250, 220], [220, 140]], np.int32)
pts_pentagon = pts_pentagon.reshape((-1, 1, 2))
cv2.polylines(img, [pts_pentagon], True, (255, 0, 0), 2)

# ç»˜åˆ¶å¡«å……å¤šè¾¹å½¢
pts_filled = np.array([[100, 300], [150, 250], [250, 300], [200, 400]], np.int32)
cv2.fillPoly(img, [pts_filled], (0, 255, 255))

cv2.imshow('Polygons', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

**å‡½æ•°å‚æ•°ï¼š**
```python
cv2.polylines(img, pts, isClosed, color, thickness)
cv2.fillPoly(img, pts, color)
```
- ==`pts`==ï¼šå¤šè¾¹å½¢é¡¶ç‚¹åˆ—è¡¨ï¼Œæ ¼å¼ï¼š`[np.array([[x1,y1], [x2,y2], ...])]`
- ==`isClosed`==ï¼šæ˜¯å¦é—­åˆï¼ˆTrue/Falseï¼‰
- `fillPoly()`ï¼šç»˜åˆ¶å¡«å……å¤šè¾¹å½¢

![[Pasted image 20251020143947.png]]

### 6. æ·»åŠ æ–‡å­— - ==cv2.putText()==

```python
import cv2
import numpy as np

img = np.zeros((512, 512, 3), dtype=np.uint8)

# æ·»åŠ ä¸åŒå­—ä½“çš„æ–‡å­—
font1 = cv2.FONT_HERSHEY_SIMPLEX
font2 = cv2.FONT_HERSHEY_PLAIN
font3 = cv2.FONT_HERSHEY_DUPLEX
font4 = cv2.FONT_HERSHEY_COMPLEX

cv2.putText(img, 'SIMPLEX', (10, 50), font1, 1, (255, 255, 255), 2)
cv2.putText(img, 'PLAIN', (10, 100), font2, 1.5, (0, 255, 0), 2)
cv2.putText(img, 'DUPLEX', (10, 150), font3, 1, (0, 255, 255), 2)
cv2.putText(img, 'COMPLEX', (10, 200), font4, 1, (255, 0, 255), 2)

# æ·»åŠ å¤§å·æ–‡å­—
cv2.putText(img, 'OpenCV', (50, 300), cv2.FONT_HERSHEY_SIMPLEX, 2.5, (0, 0, 255), 5)

# æ·»åŠ æ–œä½“æ–‡å­—
cv2.putText(img, 'Italic', (50, 400), cv2.FONT_HERSHEY_SIMPLEX | cv2.FONT_ITALIC, 
            1.5, (255, 255, 0), 3)

cv2.imshow('Text', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```
![[Pasted image 20251020144404.png]]
**å‡½æ•°å‚æ•°ï¼š**
```python
cv2.putText(img, text, org, fontFace, fontScale, color, thickness, lineType)
```
- ==`text`==ï¼šè¦æ˜¾ç¤ºçš„æ–‡å­—ï¼ˆ==ä¸æ”¯æŒä¸­æ–‡==ï¼‰
- ==`org`==ï¼šæ–‡å­—==å·¦ä¸‹è§’==åæ ‡ `(x, y)`
- ==`fontFace`==ï¼šå­—ä½“ç±»å‹
- ==`fontScale`==ï¼šå­—ä½“å¤§å°ï¼ˆç¼©æ”¾ç³»æ•°ï¼‰
- `thickness`ï¼šå­—ä½“ç²—ç»†

**å¸¸ç”¨å­—ä½“ï¼š**
- `cv2.FONT_HERSHEY_SIMPLEX`ï¼šæ­£å¸¸å¤§å°æ— è¡¬çº¿å­—ä½“
- `cv2.FONT_HERSHEY_PLAIN`ï¼šå°å·æ— è¡¬çº¿å­—ä½“
- `cv2.FONT_HERSHEY_DUPLEX`ï¼šæ­£å¸¸å¤§å°æ— è¡¬çº¿å­—ä½“ï¼ˆè¾ƒç²—ï¼‰
- `cv2.FONT_HERSHEY_COMPLEX`ï¼šæ­£å¸¸å¤§å°æœ‰è¡¬çº¿å­—ä½“
- `cv2.FONT_HERSHEY_TRIPLEX`ï¼šæ­£å¸¸å¤§å°æœ‰è¡¬çº¿å­—ä½“ï¼ˆè¾ƒç²—ï¼‰
- `cv2.FONT_HERSHEY_SCRIPT_SIMPLEX`ï¼šæ‰‹å†™é£æ ¼å­—ä½“
- æ·»åŠ  `| cv2.FONT_ITALIC` å¯ä»¥å˜æˆæ–œä½“

**æ˜¾ç¤ºä¸­æ–‡çš„æ–¹æ³•ï¼ˆä½¿ç”¨PILï¼‰ï¼š**
```python
import cv2
import numpy as np
from PIL import Image, ImageDraw, ImageFont

# åˆ›å»ºå›¾åƒ
img = np.zeros((200, 400, 3), dtype=np.uint8)

# è½¬æ¢ä¸ºPILæ ¼å¼
img_pil = Image.fromarray(img)
draw = ImageDraw.Draw(img_pil)

# ä½¿ç”¨ä¸­æ–‡å­—ä½“ï¼ˆéœ€è¦æŒ‡å®šå­—ä½“æ–‡ä»¶è·¯å¾„ï¼‰
font = ImageFont.truetype("simhei.ttf", 40)  # é»‘ä½“
draw.text((50, 50), "ä½ å¥½ï¼ŒOpenCVï¼", font=font, fill=(255, 255, 255))

# è½¬å›OpenCVæ ¼å¼
img = np.array(img_pil)

cv2.imshow('Chinese Text', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```
![[Pasted image 20251020144528.png]]

### ç»¼åˆç¤ºä¾‹ï¼šç»˜åˆ¶å®Œæ•´å›¾å½¢

```python
import cv2
import numpy as np

# åˆ›å»ºç™½è‰²ç”»å¸ƒ
img = np.ones((600, 800, 3), dtype=np.uint8) * 255

# ç»˜åˆ¶æˆ¿å­
cv2.rectangle(img, (200, 250), (600, 550), (139, 69, 19), -1)  # æˆ¿å­ä¸»ä½“ï¼ˆæ£•è‰²ï¼‰
pts = np.array([[200, 250], [400, 100], [600, 250]], np.int32)  # å±‹é¡¶
cv2.fillPoly(img, [pts], (0, 0, 200))  # çº¢è‰²å±‹é¡¶

# ç»˜åˆ¶é—¨
cv2.rectangle(img, (350, 400), (450, 550), (0, 100, 0), -1)  # ç»¿è‰²é—¨

# ç»˜åˆ¶çª—æˆ·
cv2.rectangle(img, (250, 300), (330, 380), (135, 206, 250), -1)  # å·¦çª—
cv2.rectangle(img, (470, 300), (550, 380), (135, 206, 250), -1)  # å³çª—

# ç»˜åˆ¶å¤ªé˜³
cv2.circle(img, (700, 100), 50, (0, 255, 255), -1)

# ç»˜åˆ¶äº‘æœµï¼ˆç”¨å¤šä¸ªåœ†ç»„æˆï¼‰
cv2.circle(img, (100, 120), 30, (200, 200, 200), -1)
cv2.circle(img, (130, 110), 35, (200, 200, 200), -1)
cv2.circle(img, (160, 120), 30, (200, 200, 200), -1)

# æ·»åŠ æ–‡å­—
cv2.putText(img, 'My House', (320, 580), cv2.FONT_HERSHEY_SIMPLEX, 
            1.5, (0, 0, 0), 3)

cv2.imshow('Drawing', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```
![[Pasted image 20251020144707.png]]

### å°ç»“

| å‡½æ•° | ç”¨é€” | å…³é”®å‚æ•° |
|------|------|----------|
| `cv2.line()` | ç»˜åˆ¶ç›´çº¿ | èµ·ç‚¹ã€ç»ˆç‚¹ |
| `cv2.rectangle()` | ç»˜åˆ¶çŸ©å½¢ | å·¦ä¸Šè§’ã€å³ä¸‹è§’ |
| `cv2.circle()` | ç»˜åˆ¶åœ†å½¢ | åœ†å¿ƒã€åŠå¾„ |
| `cv2.ellipse()` | ç»˜åˆ¶æ¤­åœ† | ä¸­å¿ƒã€é•¿çŸ­è½´ã€è§’åº¦ |
| `cv2.polylines()` | ç»˜åˆ¶å¤šè¾¹å½¢ | é¡¶ç‚¹åˆ—è¡¨ |
| `cv2.fillPoly()` | å¡«å……å¤šè¾¹å½¢ | é¡¶ç‚¹åˆ—è¡¨ |
| `cv2.putText()` | æ·»åŠ æ–‡å­— | æ–‡å­—ã€å·¦ä¸‹è§’åæ ‡ã€å­—ä½“ |

**æ³¨æ„äº‹é¡¹ï¼š**
- ==æ‰€æœ‰é¢œè‰²éƒ½æ˜¯BGRæ ¼å¼==
- ==thickness=-1 è¡¨ç¤ºå¡«å……==
- ==putTextä¸æ”¯æŒä¸­æ–‡ï¼Œéœ€è¦ç”¨PIL==
- åæ ‡ç³»åŸç‚¹åœ¨å·¦ä¸Šè§’ï¼Œxå‘å³ï¼Œyå‘ä¸‹

---

## å›¾åƒçš„åŸºç¡€æ“ä½œ

è¿™ä¸€èŠ‚ä¸»è¦è®²è§£å¦‚ä½•æ“ä½œå›¾åƒçš„åŸºæœ¬å±æ€§ã€åƒç´ ã€é€šé“ç­‰ã€‚

### 1. è·å–å›¾åƒå±æ€§

```python
import cv2
import numpy as np

img = cv2.imread('test.jpg')

# å›¾åƒå½¢çŠ¶ (é«˜åº¦, å®½åº¦, é€šé“æ•°)
print(f'å›¾åƒå½¢çŠ¶ï¼š{img.shape}')
height, width, channels = img.shape
print(f'é«˜åº¦ï¼š{height}, å®½åº¦ï¼š{width}, é€šé“æ•°ï¼š{channels}')

# å›¾åƒå¤§å°ï¼ˆåƒç´ æ€»æ•°ï¼‰
print(f'å›¾åƒå¤§å°ï¼š{img.size}')  # height Ã— width Ã— channels

# æ•°æ®ç±»å‹
print(f'æ•°æ®ç±»å‹ï¼š{img.dtype}')  # é€šå¸¸æ˜¯uint8

# å›¾åƒçš„ç»´åº¦
print(f'å›¾åƒç»´åº¦ï¼š{img.ndim}')  # å½©è‰²å›¾æ˜¯3ï¼Œç°åº¦å›¾æ˜¯2

# æ¯ä¸ªåƒç´ çš„å­—èŠ‚æ•°
print(f'æ¯ä¸ªåƒç´ å­—èŠ‚æ•°ï¼š{img.itemsize}')  # uint8æ˜¯1å­—èŠ‚
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
å›¾åƒå½¢çŠ¶ï¼š(480, 640, 3)
é«˜åº¦ï¼š480, å®½åº¦ï¼š640, é€šé“æ•°ï¼š3
å›¾åƒå¤§å°ï¼š921600
æ•°æ®ç±»å‹ï¼šuint8
å›¾åƒç»´åº¦ï¼š3
æ¯ä¸ªåƒç´ å­—èŠ‚æ•°ï¼š1
```

> ğŸ’¡ **é‡ç‚¹**ï¼š
> - `shape` = ==(é«˜åº¦, å®½åº¦, é€šé“æ•°)==ï¼Œæ³¨æ„æ˜¯==é«˜åº¦åœ¨å‰==
> - `size` = æ€»åƒç´ æ•° = é«˜åº¦ * å®½åº¦ * é€šé“æ•°
> - **ç°åº¦å›¾æ²¡æœ‰é€šé“æ•°ï¼Œshapeåªæœ‰2ä¸ªå€¼ `(é«˜åº¦, å®½åº¦)**`

### 2. è®¿é—®å’Œä¿®æ”¹åƒç´ 

```python
import cv2

img = cv2.imread('test.jpg')

# è®¿é—®å•ä¸ªåƒç´ ï¼ˆè¿”å›BGRå€¼ï¼‰
pixel = img[100, 200]  # [è¡Œ, åˆ—] = [y, x]
print(f'åƒç´ å€¼ï¼ˆBGRï¼‰ï¼š{pixel}')  # ä¾‹å¦‚ï¼š[120, 150, 200]

# è®¿é—®å•ä¸ªé€šé“çš„åƒç´ å€¼
blue = img[100, 200, 0]   # Bé€šé“
green = img[100, 200, 1]  # Gé€šé“
red = img[100, 200, 2]    # Ré€šé“
print(f'B={blue}, G={green}, R={red}')

# ä¿®æ”¹å•ä¸ªåƒç´ 
img[100, 200] = [255, 255, 255]  # æ”¹æˆç™½è‰²

# ä¿®æ”¹æŸä¸ªåŒºåŸŸçš„åƒç´ 
img[50:150, 100:200] = [0, 255, 0]  # ç»˜åˆ¶ç»¿è‰²çŸ©å½¢

# ä¿®æ”¹å•ä¸ªé€šé“
img[200:300, 200:300, 0] = 255  # åªä¿®æ”¹Bé€šé“ï¼Œå˜æˆé»„è‰²åŒºåŸŸ

cv2.imshow('Modified', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

**æ³¨æ„äº‹é¡¹ï¼š**
- ==è®¿é—®åƒç´ ç”¨ `img[y, x]` æˆ– `img[è¡Œ, åˆ—]`==
- ==åƒç´ å€¼æ˜¯BGRé¡ºåº==ï¼š`[B, G, R]`
- ==**æ‰¹é‡ä¿®æ”¹ç”¨åˆ‡ç‰‡ï¼š`img[y1:y2, x1:x2]==`**
![[Pasted image 20251020145425.png]]

### 3. æå–ROIï¼ˆæ„Ÿå…´è¶£åŒºåŸŸï¼‰

ROIï¼ˆRegion of Interestï¼‰å°±æ˜¯ä»å›¾åƒä¸­æå–ä¸€éƒ¨åˆ†åŒºåŸŸè¿›è¡Œæ“ä½œã€‚

```python
import cv2

img = cv2.imread('test.jpg')

# æå–ROIåŒºåŸŸï¼ˆè£å‰ªï¼‰
roi = img[100:300, 150:350]  # [y1:y2, x1:x2]

# æ˜¾ç¤ºROI
cv2.imshow('Original', img)
cv2.imshow('ROI', roi)

# å°†ROIå¤åˆ¶åˆ°å…¶ä»–ä½ç½®
img[400:600, 400:600] = roi

# å¯¹ROIè¿›è¡Œå¤„ç†
roi_gray = cv2.cvtColor(roi, cv2.COLOR_BGR2GRAY)
roi_blur = cv2.GaussianBlur(roi, (15, 15), 0)

cv2.imshow('Result', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

![[Pasted image 20251020150036.png]]
![[Pasted image 20251020150050.png]]
### 4. å›¾åƒé€šé“çš„æ‹†åˆ†ä¸åˆå¹¶

å½©è‰²å›¾åƒç”±Bã€Gã€Rä¸‰ä¸ªé€šé“ç»„æˆï¼Œå¯ä»¥åˆ†å¼€å¤„ç†å†åˆå¹¶ã€‚

**æ–¹æ³•1ï¼šä½¿ç”¨ ==cv2.split()== å’Œ ==cv2.merge()==**

```python
import cv2
import numpy as np

img = cv2.imread('test.jpg')

# æ‹†åˆ†é€šé“
b, g, r = cv2.split(img)

# æ˜¾ç¤ºå„ä¸ªé€šé“ï¼ˆéƒ½æ˜¯ç°åº¦å›¾ï¼‰
cv2.imshow('Blue Channel', b)
cv2.imshow('Green Channel', g)
cv2.imshow('Red Channel', r)

# åˆå¹¶é€šé“
merged = cv2.merge([b, g, r])

# è°ƒæ¢é€šé“é¡ºåºï¼ˆBGRå˜æˆRGBï¼‰
rgb = cv2.merge([r, g, b])

# åªä¿ç•™æŸä¸ªé€šé“ï¼ˆå…¶ä»–é€šé“ç½®0ï¼‰
zeros = np.zeros(img.shape[:2], dtype=np.uint8)
only_blue = cv2.merge([b, zeros, zeros])   # åªä¿ç•™è“è‰²
only_green = cv2.merge([zeros, g, zeros])  # åªä¿ç•™ç»¿è‰²
only_red = cv2.merge([zeros, zeros, r])    # åªä¿ç•™çº¢è‰²

cv2.imshow('Only Blue', only_blue)
cv2.imshow('Only Green', only_green)
cv2.imshow('Only Red', only_red)

cv2.waitKey(0)
cv2.destroyAllWindows()
```
![[Pasted image 20251020151800.png]]
**æ–¹æ³•2ï¼šä½¿ç”¨NumPyåˆ‡ç‰‡ï¼ˆæ›´å¿«ï¼‰**

```python
import cv2

img = cv2.imread('test.jpg')

# æå–é€šé“
b = img[:, :, 0]  # è“è‰²é€šé“
g = img[:, :, 1]  # ç»¿è‰²é€šé“
r = img[:, :, 2]  # çº¢è‰²é€šé“

# ä¿®æ”¹æŸä¸ªé€šé“
img[:, :, 0] = 0  # å°†è“è‰²é€šé“ç½®0

cv2.imshow('No Blue', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

**æ€§èƒ½å¯¹æ¯”ï¼š**
- `cv2.split()` / `cv2.merge()`ï¼šæ¯”è¾ƒæ…¢ï¼Œä½†ä»£ç æ¸…æ™°
- NumPyåˆ‡ç‰‡ï¼š==æ›´å¿«==ï¼Œæ¨èç”¨äºå¤§å›¾åƒ

**å‡½æ•°å‚æ•°ï¼š**
```python
cv2.split(img)
cv2.merge(channels)
```
- ==`cv2.split(img)`==ï¼šæ‹†åˆ†é€šé“
  - `img`ï¼šè¾“å…¥å›¾åƒï¼ˆ3é€šé“ï¼‰
  - **è¿”å›å€¼**ï¼š`(b, g, r)` ä¸‰ä¸ªå•é€šé“æ•°ç»„
  
- ==`cv2.merge(channels)`==ï¼šåˆå¹¶é€šé“
  - `channels`ï¼šé€šé“åˆ—è¡¨ `[b, g, r]`
  - **è¿”å›å€¼**ï¼šåˆå¹¶åçš„3é€šé“å›¾åƒ

### 5. è‰²å½©ç©ºé—´çš„è½¬æ¢ - ==cv2.cvtColor()==

OpenCVæ”¯æŒå¤šç§è‰²å½©ç©ºé—´çš„è½¬æ¢ï¼Œå¸¸ç”¨çš„æœ‰BGRã€RGBã€ç°åº¦ã€HSVã€LABç­‰ã€‚

**å¸¸ç”¨è½¬æ¢ï¼š**

```python
import cv2
import matplotlib.pyplot as plt

img = cv2.imread('test.jpg')

# BGRè½¬RGBï¼ˆmatplotlibæ˜¾ç¤ºç”¨ï¼‰
img_rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)

# BGRè½¬ç°åº¦
img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

# BGRè½¬HSVï¼ˆè‰²ç›¸ã€é¥±å’Œåº¦ã€æ˜åº¦ï¼‰
img_hsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)

# BGRè½¬LABï¼ˆLabè‰²å½©ç©ºé—´ï¼‰
img_lab = cv2.cvtColor(img, cv2.COLOR_BGR2LAB)

# ç°åº¦è½¬BGRï¼ˆå•é€šé“å˜ä¸‰é€šé“ï¼‰
img_bgr = cv2.cvtColor(img_gray, cv2.COLOR_GRAY2BGR)

# æ˜¾ç¤ºå¯¹æ¯”
fig, axes = plt.subplots(2, 3, figsize=(15, 10))
axes[0, 0].imshow(img_rgb); axes[0, 0].set_title('Original (RGB)')
axes[0, 1].imshow(img_gray, cmap='gray'); axes[0, 1].set_title('Grayscale')
axes[0, 2].imshow(img_hsv); axes[0, 2].set_title('HSV')
axes[1, 0].imshow(img_lab); axes[1, 0].set_title('LAB')

# æ˜¾ç¤ºHSVå„ä¸ªé€šé“
h, s, v = cv2.split(img_hsv)
axes[1, 1].imshow(s, cmap='gray'); axes[1, 1].set_title('HSV - Saturation')
axes[1, 2].imshow(v, cmap='gray'); axes[1, 2].set_title('HSV - Value')

for ax in axes.flat:
    ax.axis('off')
    
plt.tight_layout()
plt.show()
```
![[Pasted image 20251020152135.png]]
**HSVè‰²å½©ç©ºé—´è¯¦è§£ï¼š**

HSVæ¯”BGRæ›´ç¬¦åˆäººç±»å¯¹é¢œè‰²çš„æ„ŸçŸ¥ï¼š
- ==Hï¼ˆHueï¼‰==ï¼šè‰²ç›¸ï¼Œè¡¨ç¤ºé¢œè‰²ç±»å‹ï¼ˆ0-180åº¦ï¼‰
  - çº¢è‰²ï¼š0-10, 170-180
  - ç»¿è‰²ï¼š40-80
  - è“è‰²ï¼š100-130
- ==Sï¼ˆSaturationï¼‰==ï¼šé¥±å’Œåº¦ï¼Œé¢œè‰²çš„çº¯åº¦ï¼ˆ0-255ï¼‰
  - 0ï¼šç°è‰²
  - 255ï¼šçº¯è‰²
- ==Vï¼ˆValueï¼‰==ï¼šæ˜åº¦ï¼Œé¢œè‰²çš„äº®åº¦ï¼ˆ0-255ï¼‰
  - 0ï¼šé»‘è‰²
  - 255ï¼šæœ€äº®

**HSVçš„åº”ç”¨ï¼šé¢œè‰²æ£€æµ‹**

```python
import cv2
import numpy as np

img = cv2.imread('test.jpg')
hsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)

# å®šä¹‰é¢œè‰²èŒƒå›´ï¼ˆæ£€æµ‹çº¢è‰²ï¼‰
lower_red = np.array([0, 50, 50])
upper_red = np.array([10, 255, 255])

# åˆ›å»ºæ©ç 
mask = cv2.inRange(hsv, lower_red, upper_red)

# åº”ç”¨æ©ç 
result = cv2.bitwise_and(img, img, mask=mask)

cv2.imshow('Original', img)
cv2.imshow('Mask', mask)
cv2.imshow('Result', result)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

**å‡½æ•°å‚æ•°ï¼š**
```python
cv2.inRange(src, lowerb, upperb)
```
- ==`src`==ï¼šè¾“å…¥å›¾åƒï¼ˆé€šå¸¸æ˜¯HSVæ ¼å¼ï¼‰
- ==`lowerb`==ï¼šä¸‹é™å€¼ï¼ˆNumPyæ•°ç»„ï¼‰`[H_min, S_min, V_min]`
- ==`upperb`==ï¼šä¸Šé™å€¼ï¼ˆNumPyæ•°ç»„ï¼‰`[H_max, S_max, V_max]`
- **è¿”å›å€¼**ï¼šäºŒå€¼æ©ç å›¾åƒï¼ˆåœ¨èŒƒå›´å†…çš„åƒç´ ä¸º255ï¼Œå¦åˆ™ä¸º0ï¼‰

![[Pasted image 20251020152528.png]]

**å¸¸ç”¨è‰²å½©ç©ºé—´è½¬æ¢ä»£ç ï¼š**

| **è½¬æ¢**          | **ä»£ç **                    | **ç”¨é€”**            |
| ----------- | --------------------- | ------------- |
| **BGR â†’ RGB**   | **`cv2.COLOR_BGR2RGB`**   | **Matplotlibæ˜¾ç¤º**  |
| **BGR â†’ ç°åº¦**    | **`cv2.COLOR_BGR2GRAY`**  | **ç®€åŒ–å¤„ç†**          |
| **BGR â†’ HSV**   | **`cv2.COLOR_BGR2HSV`**   | **==é¢œè‰²æ£€æµ‹==ï¼ˆæœ€å¸¸ç”¨ï¼‰** |
| **BGR â†’ LAB**   | **`cv2.COLOR_BGR2LAB`**   | **è‚¤è‰²æ£€æµ‹**          |
| **BGR â†’ YCrCb** | **`cv2.COLOR_BGR2YCrCb`** | **JPEGå‹ç¼©**        |
| **ç°åº¦ â†’ BGR**    | **`cv2.COLOR_GRAY2BGR`**  | **é€šé“æ•°åŒ¹é…**         |
| **HSV â†’ BGR**   | **`cv2.COLOR_HSV2BGR`**   | **è¿˜åŸé¢œè‰²**          |

### ç»¼åˆç¤ºä¾‹ï¼šé€šé“æ“ä½œå’Œè‰²å½©è½¬æ¢

```python
import cv2
import numpy as np

img = cv2.imread('test.jpg')

# 1. æ‹†åˆ†é€šé“
b, g, r = cv2.split(img)

# 2. å¢å¼ºæŸä¸ªé€šé“ï¼ˆè®©å›¾ç‰‡åè“ï¼‰
b = cv2.add(b, 50)  # è“è‰²é€šé“å¢åŠ 50
img_blue_enhanced = cv2.merge([b, g, r])

# 3. äº¤æ¢é€šé“ï¼ˆBGRå˜GBRï¼Œä¼šå˜æˆå¥‡æ€ªçš„é¢œè‰²ï¼‰
img_swapped = cv2.merge([g, b, r])

# 4. è½¬HSVå¹¶å¢å¼ºé¥±å’Œåº¦
hsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)
h, s, v = cv2.split(hsv)
s = cv2.add(s, 50)  # å¢åŠ é¥±å’Œåº¦
s = np.clip(s, 0, 255)  # é™åˆ¶åœ¨0-255èŒƒå›´
hsv_enhanced = cv2.merge([h, s, v])
img_saturated = cv2.cvtColor(hsv_enhanced, cv2.COLOR_HSV2BGR)

# æ˜¾ç¤ºç»“æœ
cv2.imshow('Original', img)
cv2.imshow('Blue Enhanced', img_blue_enhanced)
cv2.imshow('Channel Swapped', img_swapped)
cv2.imshow('Saturation Enhanced', img_saturated)

cv2.waitKey(0)
cv2.destroyAllWindows()
```

### 6. æ“ä½œæ©ç ï¼ˆMaskï¼‰

**æ©ç ï¼ˆMaskï¼‰æ˜¯ä¸€ç§äºŒå€¼å›¾åƒï¼Œç”¨äºæŒ‡å®šåœ¨å“ªäº›åŒºåŸŸè¿›è¡Œæ“ä½œï¼Œå“ªäº›åŒºåŸŸä¸æ“ä½œã€‚æ©ç ä¸º255ï¼ˆç™½è‰²ï¼‰çš„åœ°æ–¹ä¼šè¢«å¤„ç†ï¼Œæ©ç ä¸º0ï¼ˆé»‘è‰²ï¼‰çš„åœ°æ–¹ä¼šè¢«å¿½ç•¥ã€‚**

**åŸºæœ¬æ¦‚å¿µï¼š**
- ==**æ©ç æ˜¯å•é€šé“ç°åº¦å›¾ï¼ˆ0æˆ–255ï¼‰**==
- **==æ©ç ä¸º255çš„åŒºåŸŸï¼šæ‰§è¡Œæ“ä½œ==**
- **==æ©ç ä¸º0çš„åŒºåŸŸï¼šä¿æŒä¸å˜==**

**åˆ›å»ºæ©ç ç¤ºä¾‹ï¼š**

```python
import cv2
import numpy as np

img = cv2.imread('test.jpg')
h, w = img.shape[:2]

# åˆ›å»ºå…¨é›¶æ©ç 
mask = np.zeros((h, w), dtype=np.uint8)

# åœ¨æ©ç ä¸Šç»˜åˆ¶ç™½è‰²åŒºåŸŸï¼ˆè¦æ“ä½œçš„åŒºåŸŸï¼‰
cv2.circle(mask, (w//2, h//2), min(h, w)//3, 255, -1)

cv2.imshow('Mask', mask)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

**åº”ç”¨3ï¼šåå‘æ©ç **

```python
import cv2
import numpy as np

img = cv2.imread('test.jpg')
h, w = img.shape[:2]

# åˆ›å»ºåœ†å½¢æ©ç 
mask = np.zeros((h, w), dtype=np.uint8)
cv2.circle(mask, (w//2, h//2), min(h, w)//3, 255, -1)

# åå‘æ©ç ï¼ˆåœ†å¤–çš„åŒºåŸŸï¼‰
mask_inv = cv2.bitwise_not(mask)

# åœ†å†…åŒºåŸŸ
fg = cv2.bitwise_and(img, img, mask=mask)

# åœ†å¤–åŒºåŸŸ
bg = cv2.bitwise_and(img, img, mask=mask_inv)

cv2.imshow('Foreground', fg)
cv2.imshow('Background', bg)
cv2.waitKey(0)
cv2.destroyAllWindows()
```
![[Pasted image 20251020161827.png]]

**å°ç»“ï¼š**
- **æ©ç æ˜¯å•é€šé“äºŒå€¼å›¾åƒï¼ˆ0æˆ–255ï¼‰**
- **`mask=mask` å‚æ•°ç”¨äºæŒ‡å®šæ“ä½œåŒºåŸŸ**
- `cv2.bitwise_not()` å¯ä»¥åè½¬æ©ç 
- å¸¸ç”¨äºå±€éƒ¨å›¾åƒå¤„ç†ã€ROIæå–ã€å›¾åƒåˆæˆ

---

## å›¾åƒçš„ç®—æœ¯è¿ç®—

å›¾åƒçš„ç®—æœ¯è¿ç®—ç”¨äºè°ƒæ•´äº®åº¦ã€å¯¹æ¯”åº¦ã€å›¾åƒå åŠ ç­‰æ“ä½œã€‚

### 1. å›¾åƒåŠ æ³• - ==cv2.add()==

```python
import cv2
import numpy as np

img = cv2.imread('test.jpg')

# æ–¹æ³•1ï¼šç›´æ¥ç”¨NumPyåŠ æ³•ï¼ˆå¯èƒ½æº¢å‡ºï¼‰
img_numpy = img + 50  # ç›´æ¥åŠ ï¼Œè¶…è¿‡255ä¼šæº¢å‡ºï¼ˆå–æ¨¡ï¼‰
print(f'NumPyåŠ æ³•ï¼Œ[255,255,255] + 50 = {np.array([255,255,255], dtype=np.uint8) + 50}')

# æ–¹æ³•2ï¼šç”¨cv2.addï¼ˆè‡ªåŠ¨æˆªæ–­åˆ°255ï¼‰
img_cv = cv2.add(img, np.array([50, 50, 50], dtype=np.uint8))
print(f'cv2.addï¼Œ[255,255,255] + 50 = {cv2.add(np.array([255,255,255], dtype=np.uint8), np.array([50,50,50], dtype=np.uint8))}')

# æ¨èç”¨æ³•ï¼šè°ƒæ•´äº®åº¦
brightness = 50
img_bright = cv2.add(img, np.array([brightness] * 3, dtype=np.uint8))

cv2.imshow('Original', img)
cv2.imshow('Brighter', img_bright)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

**ä¸¤ç§æ–¹æ³•çš„åŒºåˆ«ï¼š**
- ==NumPyåŠ æ³•==ï¼šæº¢å‡ºä¼šå›ç»•ï¼ˆ255+50 = 49ï¼‰
- ==cv2.add()==ï¼šæº¢å‡ºä¼šé¥±å’Œï¼ˆ255+50 = 255ï¼‰â­ æ¨è

**å‡½æ•°å‚æ•°ï¼š**
```python
cv2.add(src1, src2, dst=None, mask=None, dtype=None)
```
- ==`src1`==ï¼šç¬¬ä¸€å¼ å›¾åƒï¼ˆNumPyæ•°ç»„ï¼‰
- ==`src2`==ï¼šç¬¬äºŒå¼ å›¾åƒæˆ–æ ‡é‡å€¼
- `mask`ï¼šå¯é€‰çš„æ©ç ï¼ˆåªå¯¹maskéé›¶çš„åœ°æ–¹è¿›è¡Œè¿ç®—ï¼‰
- **è¿”å›å€¼**ï¼šè¿ç®—ç»“æœï¼Œæº¢å‡ºè‡ªåŠ¨é¥±å’Œåˆ°255

### 2. å›¾åƒå‡æ³• - ==cv2.subtract()==

```python
import cv2
import numpy as np

img = cv2.imread('test.jpg')

# å‡å°‘äº®åº¦
darkness = 50
img_dark = cv2.subtract(img, np.array([darkness] * 3, dtype=np.uint8))

# è®¡ç®—ä¸¤å¼ å›¾çš„å·®å¼‚
img1 = cv2.imread('img1.jpg')
img2 = cv2.imread('img2.jpg')
diff = cv2.subtract(img1, img2)  # ç»å¯¹å·®å¼‚ç”¨cv2.absdiff()

cv2.imshow('Original', img)
cv2.imshow('Darker', img_dark)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

**å‡½æ•°å‚æ•°ï¼š**
```python
cv2.subtract(src1, src2, dst=None, mask=None, dtype=None)
cv2.absdiff(src1, src2)  # è®¡ç®—ç»å¯¹å·®å€¼
```
- ==`src1`==ï¼šç¬¬ä¸€å¼ å›¾åƒ
- ==`src2`==ï¼šç¬¬äºŒå¼ å›¾åƒæˆ–æ ‡é‡å€¼
- ==`absdiff()`ï¼šè®¡ç®— `|src1 - src2|` çš„ç»å¯¹å·®å€¼==
- ==**è¿”å›å€¼ï¼šè¿ç®—ç»“æœï¼Œä¸‹æº¢è‡ªåŠ¨é¥±å’Œåˆ°0**==

### 3. å›¾åƒä¹˜æ³•å’Œé™¤æ³• - ==cv2.multiply==ã€==cv2.divide==

```python
import cv2
import numpy as np

img = cv2.imread('test.jpg')

# ä¹˜æ³•ï¼šå¢åŠ å¯¹æ¯”åº¦
img_mul = cv2.multiply(img, np.array([1.5, 1.5, 1.5]))  # æ³¨æ„ä¼šæº¢å‡º
img_mul = np.clip(img_mul, 0, 255).astype(np.uint8)

# é™¤æ³•ï¼šé™ä½å¯¹æ¯”åº¦
img_div = cv2.divide(img, np.array([2.0, 2.0, 2.0])).astype(np.uint8)

cv2.imshow('Original', img)
cv2.imshow('Multiply', img_mul)
cv2.imshow('Divide', img_div)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

**å‡½æ•°å‚æ•°ï¼š**
```python
cv2.multiply(src1, src2, dst=None, scale=1.0, dtype=None)
cv2.divide(src1, src2, dst=None, scale=1.0, dtype=None)
```
- ==`src1`==ï¼šç¬¬ä¸€å¼ å›¾åƒ
- ==`src2`==ï¼šç¬¬äºŒå¼ å›¾åƒæˆ–æ ‡é‡å€¼
- `scale`ï¼šç¼©æ”¾å› å­ï¼ˆå¯é€‰ï¼‰
- **æ³¨æ„**ï¼šä¹˜æ³•å®¹æ˜“æº¢å‡ºï¼Œå»ºè®®ç”¨ `np.clip()` é™åˆ¶èŒƒå›´

### 4. æŒ‰ä½è¿ç®—

**æŒ‰ä½è¿ç®—å¸¸ç”¨äºåˆ¶ä½œè’™ç‰ˆã€å›¾åƒå åŠ ç­‰ã€‚**

```python
import cv2
import numpy as np

# åˆ›å»ºä¸¤å¼ ç®€å•çš„å›¾
img1 = np.zeros((300, 300), dtype=np.uint8)
cv2.rectangle(img1, (50, 50), (250, 250), 255, -1)

img2 = np.zeros((300, 300), dtype=np.uint8)
cv2.circle(img2, (150, 150), 100, 255, -1)

# æŒ‰ä½ä¸ï¼ˆANDï¼‰- äº¤é›†
bitwise_and = cv2.bitwise_and(img1, img2)

# æŒ‰ä½æˆ–ï¼ˆORï¼‰- å¹¶é›†
bitwise_or = cv2.bitwise_or(img1, img2)

# æŒ‰ä½å¼‚æˆ–ï¼ˆXORï¼‰- ä¸é‡å çš„éƒ¨åˆ†
bitwise_xor = cv2.bitwise_xor(img1, img2)

# æŒ‰ä½éï¼ˆNOTï¼‰- åè½¬
bitwise_not = cv2.bitwise_not(img1)

# æ˜¾ç¤ºç»“æœ
import matplotlib.pyplot as plt
fig, axes = plt.subplots(2, 3, figsize=(12, 8))
axes[0, 0].imshow(img1, cmap='gray'); axes[0, 0].set_title('Image 1')
axes[0, 1].imshow(img2, cmap='gray'); axes[0, 1].set_title('Image 2')
axes[0, 2].imshow(bitwise_and, cmap='gray'); axes[0, 2].set_title('AND')
axes[1, 0].imshow(bitwise_or, cmap='gray'); axes[1, 0].set_title('OR')
axes[1, 1].imshow(bitwise_xor, cmap='gray'); axes[1, 1].set_title('XOR')
axes[1, 2].imshow(bitwise_not, cmap='gray'); axes[1, 2].set_title('NOT')
for ax in axes.flat: ax.axis('off')
plt.tight_layout()
plt.show()
```
![[Pasted image 20251020155904.png]]
**å‡½æ•°å‚æ•°ï¼š**
```python
cv2.bitwise_and(src1, src2, dst=None, mask=None)
cv2.bitwise_or(src1, src2, dst=None, mask=None)
cv2.bitwise_xor(src1, src2, dst=None, mask=None)
cv2.bitwise_not(src, dst=None, mask=None)
```
- ==`src1, src2`==ï¼šè¾“å…¥å›¾åƒ
- ==`mask`==ï¼šå¯é€‰çš„æ“ä½œæ©ç 
- **è¿”å›å€¼**ï¼šæŒ‰ä½è¿ç®—ç»“æœ

**æŒ‰ä½è¿ç®—è¯´æ˜ï¼š**
- **`AND`ï¼šä¸¤ä¸ªéƒ½æ˜¯1æ‰æ˜¯1ï¼ˆ==äº¤é›†==ï¼‰**
- **`OR`ï¼šæœ‰ä¸€ä¸ªæ˜¯1å°±æ˜¯1ï¼ˆ==å¹¶é›†==ï¼‰**
- **`XOR`ï¼šä¸åŒä¸º1ï¼Œç›¸åŒä¸º0ï¼ˆ==å·®é›†==ï¼‰**
- **`NOT`ï¼š0å˜1ï¼Œ1å˜0ï¼ˆ==åè½¬==ï¼‰**


**æŒ‰ä½è¿ç®—çš„åº”ç”¨ï¼šå›¾åƒè’™ç‰ˆ**

```python
import cv2
import numpy as np

# è¯»å–å›¾åƒ
img = cv2.imread('test.jpg')
h, w = img.shape[:2]

# åˆ›å»ºåœ†å½¢è’™ç‰ˆ
mask = np.zeros((h, w), dtype=np.uint8)
cv2.circle(mask, (w//2, h//2), min(h, w)//3, 255, -1)

# åº”ç”¨è’™ç‰ˆï¼ˆåªä¿ç•™åœ†å½¢åŒºåŸŸï¼‰
result = cv2.bitwise_and(img, img, mask=mask)

cv2.imshow('Original', img)
cv2.imshow('Mask', mask)
cv2.imshow('Result', result)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

![[Pasted image 20251020160111.png]]

### 5. å›¾åƒæ··åˆï¼ˆèåˆï¼‰

å›¾åƒæ··åˆå¯ä»¥å®ç°ä¸¤å¼ å›¾çš„å åŠ ã€æ·¡å…¥æ·¡å‡ºç­‰æ•ˆæœã€‚

**5.1 åŸºæœ¬æ··åˆ - ==cv2.addWeighted()==**

```python
import cv2

# è¯»å–ä¸¤å¼ å¤§å°ç›¸åŒçš„å›¾ç‰‡
img1 = cv2.imread('img1.jpg')
img2 = cv2.imread('img2.jpg')

# ç¡®ä¿ä¸¤å¼ å›¾å¤§å°ä¸€è‡´
img2 = cv2.resize(img2, (img1.shape[1], img1.shape[0]))

# ==æ··åˆå…¬å¼ï¼šresult = img1 * Î± + img2 * Î² + Î³==
alpha = 0.7  # img1çš„æƒé‡
beta = 0.3   # img2çš„æƒé‡
gamma = 0    # äº®åº¦è°ƒèŠ‚å€¼

blended = cv2.addWeighted(img1, alpha, img2, beta, gamma)

cv2.imshow('Image 1', img1)
cv2.imshow('Image 2', img2)
cv2.imshow('Blended', blended)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

**å‡½æ•°å‚æ•°ï¼š**
```python
cv2.addWeighted(src1, alpha, src2, beta, gamma)
```
- ==`src1`==ï¼šç¬¬ä¸€å¼ å›¾
- ==`alpha`==ï¼šç¬¬ä¸€å¼ å›¾çš„æƒé‡ï¼ˆ0.0-1.0ï¼‰
- ==`src2`==ï¼šç¬¬äºŒå¼ å›¾
- ==`beta`==ï¼šç¬¬äºŒå¼ å›¾çš„æƒé‡ï¼ˆ0.0-1.0ï¼‰
- ==`gamma`==ï¼šäº®åº¦è°ƒèŠ‚å€¼ï¼ˆé€šå¸¸ä¸º0ï¼‰
- **å…¬å¼**ï¼š`result = src1 Ã— alpha + src2 Ã— beta + gamma`

![[Pasted image 20251020162358.png]]

**5.2 æ¸å˜è¿‡æ¸¡æ•ˆæœ**

```python
import cv2
import numpy as np

img1 = cv2.imread('img1.jpg')
img2 = cv2.imread('img2.jpg')
img2 = cv2.resize(img2, (img1.shape[1], img1.shape[0]))

# åˆ›å»ºå¤šä¸ªä¸åŒæƒé‡çš„æ··åˆå›¾åƒï¼ˆä»img1æ¸å˜åˆ°img2ï¼‰
for i in range(11):
    alpha = 1.0 - (i * 0.1)  # ä»1.0åˆ°0.0
    beta = i * 0.1            # ä»0.0åˆ°1.0
    
    blended = cv2.addWeighted(img1, alpha, img2, beta, 0)
    cv2.imshow('Transition', blended)
    cv2.waitKey(200)  # æ¯å¼ æ˜¾ç¤º200ms

cv2.destroyAllWindows()
```
---

## è¾¹ç•Œå¡«å……

è¾¹ç•Œå¡«å……å¸¸ç”¨äºå›¾åƒæ»¤æ³¢ã€å·ç§¯ç­‰æ“ä½œï¼Œé˜²æ­¢è¾¹ç¼˜ä¿¡æ¯ä¸¢å¤±ã€‚

### 1. åŸºæœ¬å¡«å…… - ==cv2.copyMakeBorder()==

```python
import cv2
import numpy as np

img = cv2.imread('test.jpg')

# å®šä¹‰å¡«å……å¤§å°
top, bottom, left, right = 50, 50, 50, 50

# ==ä¸åŒçš„å¡«å……æ–¹å¼==

# 1. å¸¸æ•°å¡«å……ï¼ˆç”¨æŒ‡å®šé¢œè‰²å¡«å……ï¼‰
constant = cv2.copyMakeBorder(img, top, bottom, left, right, 
                              cv2.BORDER_CONSTANT, value=[255, 0, 0])

# 2. å¤åˆ¶è¾¹ç¼˜åƒç´ 
replicate = cv2.copyMakeBorder(img, top, bottom, left, right, 
                               cv2.BORDER_REPLICATE)

# 3. åå°„å¡«å……ï¼ˆè¾¹ç¼˜åƒç´ é•œåƒï¼‰
reflect = cv2.copyMakeBorder(img, top, bottom, left, right, 
                            cv2.BORDER_REFLECT)

# 4. åå°„å¡«å……101ï¼ˆä¸é‡å¤è¾¹ç¼˜åƒç´ ï¼‰
reflect_101 = cv2.copyMakeBorder(img, top, bottom, left, right, 
                                cv2.BORDER_REFLECT_101)

# 5. ç¯ç»•å¡«å……
wrap = cv2.copyMakeBorder(img, top, bottom, left, right, 
                         cv2.BORDER_WRAP)

# æ˜¾ç¤ºå¯¹æ¯”
import matplotlib.pyplot as plt
fig, axes = plt.subplots(2, 3, figsize=(15, 10))
axes[0, 0].imshow(cv2.cvtColor(img, cv2.COLOR_BGR2RGB))
axes[0, 0].set_title('Original')
axes[0, 1].imshow(cv2.cvtColor(constant, cv2.COLOR_BGR2RGB))
axes[0, 1].set_title('CONSTANT')
axes[0, 2].imshow(cv2.cvtColor(replicate, cv2.COLOR_BGR2RGB))
axes[0, 2].set_title('REPLICATE')
axes[1, 0].imshow(cv2.cvtColor(reflect, cv2.COLOR_BGR2RGB))
axes[1, 0].set_title('REFLECT')
axes[1, 1].imshow(cv2.cvtColor(reflect_101, cv2.COLOR_BGR2RGB))
axes[1, 1].set_title('REFLECT_101')
axes[1, 2].imshow(cv2.cvtColor(wrap, cv2.COLOR_BGR2RGB))
axes[1, 2].set_title('WRAP')
for ax in axes.flat: ax.axis('off')
plt.tight_layout()
plt.show()
```

**å‡½æ•°å‚æ•°ï¼š**
```python
cv2.copyMakeBorder(src, top, bottom, left, right, borderType, value)
```
- ==`src`==ï¼šæºå›¾åƒ
- ==`top, bottom, left, right`==ï¼šå„è¾¹å¡«å……çš„åƒç´ æ•°
- ==`borderType`==ï¼šå¡«å……ç±»å‹
- `value`ï¼šå¸¸æ•°å¡«å……æ—¶çš„é¢œè‰²å€¼ï¼ˆå¯é€‰ï¼‰

**å¡«å……ç±»å‹è¯¦è§£ï¼š**

| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ï¼ˆè¾¹ç¼˜æ˜¯abcï¼‰ |
|------|------|------------------|
| `BORDER_CONSTANT` | å¸¸æ•°å¡«å…… | `iiiiabcjjjj`ï¼ˆiå’Œjæ˜¯æŒ‡å®šé¢œè‰²ï¼‰ |
| `BORDER_REPLICATE` | ==å¤åˆ¶è¾¹ç¼˜==ï¼ˆæœ€å¸¸ç”¨ï¼‰ | `aaaaabccccc` |
| `BORDER_REFLECT` | é•œåƒåå°„ | `cbaaabccba` |
| `BORDER_REFLECT_101` | é•œåƒåå°„ï¼ˆä¸é‡å¤è¾¹ç¼˜ï¼‰ | `dcbabcbcd` |
| `BORDER_WRAP` | ç¯ç»• | `bcabcabc` |
![[Pasted image 20251020163209.png]]

### 2. å®é™…åº”ç”¨ç¤ºä¾‹

**åº”ç”¨1ï¼šç»™å›¾ç‰‡åŠ è¾¹æ¡†**

```python
import cv2

img = cv2.imread('test.jpg')

# åŠ è“è‰²è¾¹æ¡†
bordered = cv2.copyMakeBorder(img, 20, 20, 20, 20, 
                             cv2.BORDER_CONSTANT, value=[255, 0, 0])

cv2.imshow('With Border', bordered)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

---

## å°ç»“

**å›¾åƒåŸºç¡€æ“ä½œï¼š**
- `shape`ï¼š==(é«˜åº¦, å®½åº¦, é€šé“æ•°)==
- `size`ï¼šæ€»åƒç´ æ•°
- `dtype`ï¼šæ•°æ®ç±»å‹ï¼ˆé€šå¸¸uint8ï¼‰

**åƒç´ æ“ä½œï¼š**
- è®¿é—®ï¼š`img[y, x]` æˆ– `img[y, x, channel]`
- ä¿®æ”¹ï¼š`img[y, x] = [B, G, R]`
- ROIï¼š`roi = img[y1:y2, x1:x2]`

**é€šé“æ“ä½œï¼š**
- æ‹†åˆ†ï¼š`b, g, r = cv2.split(img)`
- åˆå¹¶ï¼š`img = cv2.merge([b, g, r])`
- å¿«é€Ÿæå–ï¼š`b = img[:, :, 0]`

**è‰²å½©ç©ºé—´ï¼š**
- BGR â†” RGBï¼šMatplotlibæ˜¾ç¤º
- BGR â†’ ç°åº¦ï¼šç®€åŒ–å¤„ç†
- BGR â†’ HSVï¼š==é¢œè‰²æ£€æµ‹==ï¼ˆæœ€é‡è¦ï¼‰
- `cv2.cvtColor(img, code)`

**æ“ä½œæ©ç ï¼š**
- æ©ç æ˜¯å•é€šé“äºŒå€¼å›¾ï¼ˆ0æˆ–255ï¼‰
- ==æ©ç ä¸º255çš„åŒºåŸŸä¼šè¢«å¤„ç†==
- `mask=mask` å‚æ•°ç”¨äºæŒ‡å®šæ“ä½œåŒºåŸŸ
- `cv2.bitwise_not()` åè½¬æ©ç 

**ç®—æœ¯è¿ç®—ï¼š**
- åŠ æ³•ï¼š`cv2.add()` - ==è‡ªåŠ¨é¥±å’Œ==ï¼ˆæ¨èï¼‰
- å‡æ³•ï¼š`cv2.subtract()` - å‡å°‘äº®åº¦
- æŒ‰ä½è¿ç®—ï¼š`bitwise_and/or/xor/not` - åˆ¶ä½œè’™ç‰ˆ

**å›¾åƒæ··åˆï¼š**
- `cv2.addWeighted(img1, Î±, img2, Î², Î³)` - å›¾åƒèåˆ
- å…¬å¼ï¼š`result = img1 Ã— Î± + img2 Ã— Î² + Î³`
- åº”ç”¨ï¼šæ·¡å…¥æ·¡å‡ºã€æ°´å°å åŠ 

**è¾¹ç•Œå¡«å……ï¼š**
- `cv2.copyMakeBorder()` - æ·»åŠ è¾¹ç•Œ
- `BORDER_REPLICATE` - ==å¤åˆ¶è¾¹ç¼˜==ï¼ˆæœ€å¸¸ç”¨ï¼‰
- `BORDER_REFLECT` - é•œåƒåå°„
- `BORDER_CONSTANT` - å¸¸æ•°å¡«å……

---

## å¸¸ç”¨å‡½æ•°é€ŸæŸ¥è¡¨

| å‡½æ•° | ä½œç”¨ | å…³é”®å‚æ•° | å¤‡æ³¨ |
|------|------|----------|------|
| `cv2.imread(path, flag)` | è¯»å–å›¾ç‰‡ | `flag`: 0ç°åº¦, 1å½©è‰², -1å«é€æ˜ | è¿”å›BGRæ ¼å¼ |
| `cv2.imshow(name, img)` | æ˜¾ç¤ºå›¾ç‰‡ | `name`: çª—å£å | ==å¿…é¡»é…åˆwaitKey== |
| `cv2.imwrite(path, img, params)` | ä¿å­˜å›¾ç‰‡ | `params`: è´¨é‡å‚æ•° | æ ¼å¼ç”±æ‰©å±•åå®š |
| `cv2.waitKey(delay)` | ç­‰å¾…æŒ‰é”® | `delay`: 0æ— é™ç­‰å¾… | è¿”å›æŒ‰é”®ASCIIç  |
| `cv2.cvtColor(src, code)` | é¢œè‰²è½¬æ¢ | `code`: è½¬æ¢ä»£ç  | BGRâ†”RGBå¸¸ç”¨ |
| `cv2.rectangle(img, pt1, pt2, color, thick)` | ç”»çŸ©å½¢ | `thick`: -1å¡«å…… | é¢œè‰²ç”¨BGR |
| `cv2.circle(img, center, r, color, thick)` | ç”»åœ†å½¢ | `r`: åŠå¾„ | é¢œè‰²ç”¨BGR |
| `cv2.putText(img, text, org, font, scale, color, thick)` | å†™æ–‡å­— | `org`: å·¦ä¸‹è§’åæ ‡ | ==ä¸æ”¯æŒä¸­æ–‡== |
| `cv2.split(img)` | æ‹†åˆ†é€šé“ | è¿”å›(b,g,r) | é€šé“åˆ†ç¦» |
| `cv2.merge([b,g,r])` | åˆå¹¶é€šé“ | é€šé“åˆ—è¡¨ | é€šé“åˆå¹¶ |
| `cv2.inRange(src, lower, upper)` | é¢œè‰²èŒƒå›´æ£€æµ‹ | HSVèŒƒå›´ | ç”Ÿæˆæ©ç  |
| `cv2.add(img1, img2, mask)` | å›¾åƒåŠ æ³• | å¯é€‰æ©ç  | é¥±å’Œè¿ç®— |
| `cv2.addWeighted(img1, Î±, img2, Î², Î³)` | å›¾åƒæ··åˆ | `Î±+Î²=1` | å›¾åƒèåˆ |
| `cv2.bitwise_and(img1, img2, mask)` | æŒ‰ä½ä¸ | `mask`: è’™ç‰ˆ | åˆ¶ä½œè’™ç‰ˆ |
| `cv2.copyMakeBorder(img, t,b,l,r, type)` | è¾¹ç•Œå¡«å…… | `type`: å¡«å……ç±»å‹ | å›¾åƒæ‰©è¾¹ |

**è®°å¿†è¦ç‚¹ï¼š**
- OpenCVå›¾åƒ = NumPyæ•°ç»„
- å›¾åƒshape = ==(é«˜åº¦, å®½åº¦, é€šé“æ•°)==
- é¢œè‰²æ ¼å¼ = ==BGRä¸æ˜¯RGB==
- åƒç´ èŒƒå›´ = 0-255ï¼ˆuint8ï¼‰
- åæ ‡ç³»ç»Ÿ = (x, y) å…¶ä¸­xæ˜¯åˆ—ï¼Œyæ˜¯è¡Œ

